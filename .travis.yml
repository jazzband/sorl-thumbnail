language: python

python:
  - "2.7"
  - "3.3"

env:
  - TOX_ENV=py27-1.4-pil
  - TOX_ENV=py27-1.4-imagemagick
  - TOX_ENV=py27-1.4-graphicsmagick
  - TOX_ENV=py27-1.4-redis
  - TOX_ENV=py27-1.4-wand
  - TOX_ENV=py27-1.4-pgmagick

  - TOX_ENV=py27-1.5-pil
  - TOX_ENV=py27-1.5-imagemagick
  - TOX_ENV=py27-1.5-graphicsmagick
  - TOX_ENV=py27-1.5-redis
  - TOX_ENV=py27-1.5-wand
  - TOX_ENV=py27-1.5-pgmagick

  - TOX_ENV=py33-1.5-pil
  - TOX_ENV=py33-1.5-imagemagick
  - TOX_ENV=py33-1.5-graphicsmagick
  - TOX_ENV=py33-1.5-redis
  - TOX_ENV=py33-1.5-wand

  - TOX_ENV=py27-1.6-pil
  - TOX_ENV=py27-1.6-imagemagick
  - TOX_ENV=py27-1.6-graphicsmagick
  - TOX_ENV=py27-1.6-redis
  - TOX_ENV=py27-1.6-wand
  - TOX_ENV=py27-1.6-pgmagick

  - TOX_ENV=py33-1.6-pil
  - TOX_ENV=py33-1.6-imagemagick
  - TOX_ENV=py33-1.6-graphicsmagick
  - TOX_ENV=py33-1.6-redis
  - TOX_ENV=py33-1.6-wand

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq python-software-properties python-pip
  - sudo apt-get install -qq libjpeg62 libjpeg62-dev zlib1g-dev imagemagick graphicsmagick redis-server
  - sudo apt-get install -qq libmagickwand-dev libgraphicsmagick++-dev libboost-python-dev libboost-thread-dev

install:
  - ./.travis.sh

script:
  - script: tox -e $TOX_ENV

services:
  - redis-server

branches:
  only:
    - master

notifications:
  irc:
    channels:
      - "irc.freenode.org#sorl-thumbnail"
    on_success: change
    on_failure: change

  webhooks:
    urls:
      - https://webhooks.gitter.im/e/b368c47d69637f9a01a0
    on_success: change
    on_failure: change
    on_start: false
